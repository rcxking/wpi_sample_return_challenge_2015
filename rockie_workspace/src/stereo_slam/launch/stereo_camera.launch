<launch>
<!--
Stereo camera setup notes:
see: /notes/stereo_notes
-->

  <!-- stereo camera driver -->
  <node pkg="camera1394stereo" type="camera1394stereo_node" name="camera1394stereo_node" output="screen" >
    <param name="video_mode" value="1024x768_mono16" />
    <param name="format7_color_coding" value="raw16" />
    <param name="bayer_pattern" value="bggr" />
    <param name="bayer_method" value="" />
    <param name="stereo_method" value="Interlaced" />
    <param name="camera_info_url_left" value="file://$(find stereo_slam)/config/cal_left.yaml" />
    <param name="camera_info_url_right" value="file://$(find stereo_slam)/config/cal_right.yaml" />
    <remap from="/stereo_camera/left/image_raw" to="/stereo_camera/right/image_raw"/>
    <remap from="/stereo_camera/right/image_raw" to="/stereo_camera/left/image_raw"/>
    <remap from="/stereo_camera/left/camera_info" to="/stereo_camera/right/camera_info"/>
    <remap from="/stereo_camera/right/camera_info" to="/stereo_camera/left/camera_info"/>
  </node>


  <group ns="stereo_camera">
    <node pkg="nodelet" type="nodelet" name="stereo_nodelet" args="manager"/>

    <!-- bayer color channel processing-->
    <node pkg="nodelet" type="nodelet" name="image_proc_debayer_left"
        args="load image_proc/debayer stereo_nodelet">
      <remap from="image_raw" to="left/image_raw"/>
      <remap from="image_mono" to="left/image_mono"/>
      <remap from="image_color" to="left/image_color"/>
    </node>

    <node pkg="nodelet" type="nodelet" name="image_proc_debayer_right"
        args="load image_proc/debayer stereo_nodelet">
      <remap from="image_raw" to="right/image_raw"/>
      <remap from="image_mono" to="right/image_mono"/>
      <remap from="image_color" to="right/image_color"/>
    </node>
  
    <!-- image rectification -->
    <node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc">
      <param name="disparity_range" value="128"/>
    </node>
  </group>
</launch>
